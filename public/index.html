<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slay the Princess Fanpage</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" href="./assets/icone.png">

</head>

<body>
    <div class="header">
        <div class="container">
            <div class="icone"></div>
            <ul class="navbar">
                <li class="agora">
                    <a href="#">Início</a>
                </li>
                <li>
                    <a href="forum.html">Fórum</a>
                </li>
                <li>
                    <a href="quiz.html">Quiz</a>
                </li>
                <li>
                    <a>|</a>
                </li>
                <li>
                    <a href="login.html">Login</a>
                </li>
                <li>
                    <a href="cadastro.html">Cadastro</a>
                </li>
            </ul>
        </div>
    </div>


    <div class="banner">
        <div class="balao"></div>
        <div class="princesa"></div>
        <div class="logoA"></div>
        <div class="logoB"></div>
    </div>

    <div class="sobre">
        <div class="titulo">O que é a fanpage?</div>
        <div class="texto">Slay the Princess é um jogo incrível! E nós somos fãs apaixonados por ele. Criamos este espaço para que os amantes do jogo possam discutir
            sobre ele de forma respeitosa e educada. Por isso, faça seu cadastro e mate a princesa!
        </div>
        <a href="cadastro.html">Matar a princesa</a>
    </div>

    <div class="usuarios_cadastrados">
        Nós já somos: <span id="usuarios"></span> percorrendo o caminho da Floresta!
    </div>

    <div class="sobre_jogo">
        <div class="texto">
            <span class="titulo">Slay the Princess!</span>
            <span class="descricao">Com avaliações extremamente altas na Steam, o jogo impressiona com sua capacidade de construir uma narrativa baseada nas decisões do jogador
                e o convida a reflexões filosóficas profundas, ensina sobre psicologia e provê uma experiência inesquecível e muito divertida!
            </span>
        </div>
        <video src="./assets/Slay-the-Princess-Trailer.mp4" width="1920" height="1080" controls class="trailer">Seu navegador não suporta vídeos</video>
    </div>
    
</body>

</html>
<script>
    window.onload = atualizarNumeroUsuarios()

    function atualizarNumeroUsuarios() {

        fetch(`/usuarios/buscarNumeroUsuarios`, { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (novoRegistro) {

                    // alertar(novoRegistro, );
                    console.log(`Dados recebidos: ${JSON.stringify(novoRegistro)}`);
                    console.log(`Dados atuais do gráfico:`);

                    document.getElementById('usuarios').innerHTML = novoRegistro[0].numero_usuarios


                    // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
                    proximaAtualizacao = setTimeout(() => atualizarNumeroUsuarios(), 30000);
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
                // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
                proximaAtualizacao = setTimeout(() => atualizarNumeroUsuarios(), 30000);
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });

    }
</script>